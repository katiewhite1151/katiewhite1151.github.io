!function($){"use strict";var navTarget=$("body").attr("data-page-url"),docTitle=document.title,History=window.History,flag=!0,wrapInnerClone=$(".works").find(".wrap").html(),slickConfig={dots:!0,speed:500,fade:!0,infinite:!0,cssEase:"linear",adaptiveHeight:!0};function pageFunctions(){$(".page__content").find("img:first").imagesLoaded(function(){$(".portfolio-wrap").imagesLoaded(function(){$(".portfolio-wrap").masonry({itemSelector:".portfolio-item",transitionDuration:0})}),$(".blog-wrap").imagesLoaded(function(){$(".blog-wrap").masonry({itemSelector:".blog-post",transitionDuration:0})}),$("body").removeClass("loading"),$("body").removeClass("menu--open")}),$(".active-link").removeClass("active-link"),$('a[href="'+navTarget+'"]').addClass("active-link"),Waypoint.destroyAll();var galleryCount=0;$(".gallery").each(function(){var $this=$(this),thisId="gallery-"+ ++galleryCount;$this.attr("id",thisId);var galleryCols=$this.attr("data-columns");$this.append('<div class="gallery__wrap"></div>'),$this.children(".imgs").each(function(){$(this).appendTo("#"+thisId+" .gallery__wrap")}),$this.children("img").each(function(){$(this).appendTo("#"+thisId+" .gallery__wrap")}),$this.find(".gallery__wrap img").each(function(){var imageSrc=$(this).attr("src");$(this).wrapAll('<div class="gallery__item"><a href="'+imageSrc+'" class="gallery__item__link"></div></div>').appendTo()}),$this.imagesLoaded(function(){"1"===galleryCols?($this.addClass("gallery--carousel"),$this.children(".gallery__wrap").addClass("owl-carousel"),$this.children(".gallery__wrap").owlCarousel({items:1,loop:!0,mouseDrag:!1,touchDrag:!1,pullDrag:!1,dots:!1,autoplay:!1,autoplayTimeout:6e3,autoHeight:!0,animateOut:"fadeOut"}),new Waypoint({element:document.getElementById(thisId),handler:function(direction){"down"===direction&&$this.children(".gallery__wrap").trigger("stop.owl.autoplay"),"up"===direction&&$this.children(".gallery__wrap").trigger("play.owl.autoplay")},offset:"-100%"}),new Waypoint({element:document.getElementById(thisId),handler:function(direction){"down"===direction&&$this.children(".gallery__wrap").trigger("play.owl.autoplay"),"up"===direction&&$this.children(".gallery__wrap").trigger("stop.owl.autoplay")},offset:"100%"})):($this.addClass("gallery--grid"),$this.children(".gallery__wrap").masonry({itemSelector:".gallery__item",transitionDuration:0}),$(".gallery a").each(function(){$(this).attr("title",$(this).parent().parent().find("p").html())}),$(".gallery a").simpleLightbox()),$this.addClass("gallery--on")})}),$(".single p > img").each(function(){var thisP=$(this).parent("p");$(this).insertAfter(thisP),$(this).wrapAll('<div class="image-wrap"></div>'),thisP.remove()}),$(".single iframe").each(function(){var ratio;(0<=$(this).attr("src").indexOf("youtube")||0<=$(this).attr("src").indexOf("vimeo"))&&(ratio=$(this).attr("width"),ratio=$(this).attr("height")/ratio*100,$(this).wrapAll('<div class="video-wrap"><div class="video" style="padding-bottom:'+ratio+'%;"></div></div>'))}),$(".single table").each(function(){$(this).wrapAll('<div class="table-wrap"></div>')}),$(".single").hasClass("home")?$("body").addClass("scroll-fix"):$("body").removeClass("scroll-fix")}$("body").on("click","a.btn-works",function(e){return e.preventDefault(),!1}),$("body").on("click","a.btn-works .square.big, a.btn-works .tiles",function($selected){$(".wrap").fadeOut(0),$("a.btn-works").toggleClass("slider"),$selected.preventDefault();$selected=$(".works").find(".wrap").html(wrapInnerClone).find(".selected");return $(".works").find(".wrap").empty(),$selected=$(".works").find(".wrap").append($selected).find(".selected"),flag=flag?($selected.addClass("gallery").attr("data-columns",3),pageFunctions(),!1):($selected.slick(slickConfig),!0),$(".wrap").fadeIn(),!1}),History.Adapter.bind(window,"statechange",function(){var state=History.getState();$("body").addClass("loading"),$(".page-loader").load(state.hash+" .page__content",function(){$("body, html").animate({scrollTop:0},300);setTimeout(function(){$(".page .page__content").remove(),$(".page-loader .page__content").appendTo(".page"),$("body").attr("data-page-url",window.location.pathname),navTarget=$("body").attr("data-page-url"),docTitle=$(".page__content").attr("data-page-title"),document.title=docTitle,pageFunctions(),$(".selected").slick(slickConfig),flag=!0},400)})}),$("body").hasClass("ajax-loading")&&$(document).on("click","a",function(thisTarget){thisTarget.preventDefault();thisTarget=$(this).attr("href");$(this).hasClass("js-no-ajax")||0<=thisTarget.indexOf("#")||0<=thisTarget.indexOf("mailto:")||0<=thisTarget.indexOf("tel:")?window.location=thisTarget:$(this).is(".gallery__item__link")||(0<=thisTarget.indexOf("http")?window.open(thisTarget,"_blank"):(navTarget=thisTarget,History.pushState(null,docTitle,thisTarget)))}),pageFunctions(),$(".selected").slick(slickConfig),flag=!0,$(document).on("click",".js-menu-toggle",function(){$("body").hasClass("menu--open")?$("body").removeClass("menu--open"):$("body").addClass("menu--open")}),$(document).on("click",".menu__list__item__link",function(){$(".menu").hasClass("menu--open")&&$(".menu").removeClass("menu--open")}),$(document).on("submit","#contact-form",function(e){$(".contact-form__item--error").removeClass("contact-form__item--error");var emailField=$('.contact-form__input[name="email"]'),nameField=$('.contact-form__input[name="name"]'),messageField=$('.contact-form__textarea[name="message"]'),gotchaField=$(".contact-form__gotcha");""===emailField.val()&&emailField.closest(".contact-form__item").addClass("contact-form__item--error"),""===nameField.val()&&nameField.closest(".contact-form__item").addClass("contact-form__item--error"),""===messageField.val()&&messageField.closest(".contact-form__item").addClass("contact-form__item--error"),""!==emailField.val()&&""!==nameField.val()&&""!==messageField.val()&&0===gotchaField.val().length||e.preventDefault()}),function(window,document){var ModernizrProto={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(test,cb){var self=this;setTimeout(function(){cb(self[test])},0)}};(Modernizr=function(){}).prototype=ModernizrProto;var Modernizr=new Modernizr,docElement=document.documentElement,isSVG="svg"===docElement.nodeName.toLowerCase();function createElement(argument_0){return"function"!=typeof document.createElement?document.createElement(argument_0):isSVG?document.createElementNS.call(document,"http://www.w3.org/2000/svg",argument_0):document.createElement.apply(document,arguments)}function injectElementWithStyles(ret,callback,nodes,testnames){var style,node,docOverflow,mod="modernizr",div=createElement("div"),body=function(){var body=document.body;return body||((body=createElement(isSVG?"svg":"body")).fake=!0),body}();if(parseInt(nodes,10))for(;nodes--;)(node=createElement("div")).id=testnames?testnames[nodes]:mod+(nodes+1),div.appendChild(node);return(style=createElement("style")).type="text/css",style.id="s"+mod,(body.fake?body:div).appendChild(style),body.appendChild(div),style.styleSheet?style.styleSheet.cssText=ret:style.appendChild(document.createTextNode(ret)),div.id=mod,body.fake&&(body.style.background="",body.style.overflow="hidden",docOverflow=docElement.style.overflow,docElement.style.overflow="hidden",docElement.appendChild(body)),ret=callback(div,ret),body.fake?(body.parentNode.removeChild(body),docElement.style.overflow=docOverflow,docElement.offsetHeight):div.parentNode.removeChild(div),ret}var matchMedia,mq=(matchMedia=window.matchMedia||window.msMatchMedia)?function(mql){mql=matchMedia(mql);return mql&&mql.matches||!1}:function(mq){var bool=!1;return injectElementWithStyles("@media "+mq+" { #modernizr { position: absolute; } }",function(node){bool="absolute"==(window.getComputedStyle?window.getComputedStyle(node,null):node.currentStyle).position}),bool};ModernizrProto.mq=mq;for(var i=0;i<Modernizr._q.length;i++)Modernizr._q[i]();window.Modernizr=Modernizr}(window,document),Modernizr.mq("(max-width: 768px)")&&flag&&($("a.btn-works .tiles").click(),flag=!1),$(window).resize(function(){Modernizr.mq("(max-width: 768px)")&&flag&&($("a.btn-works .tiles").click(),flag=!1)})}(jQuery);